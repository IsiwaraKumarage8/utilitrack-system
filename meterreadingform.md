I need to create a "Record Meter Reading" form modal for my Utility Management System. This form will be used by Field Officers to record meter readings for electricity, water, and gas meters.

CONTEXT - DATABASE STRUCTURE FOR METER_READING:
The Meter_Reading table has these fields:
- reading_id (auto-generated by database)
- meter_id (foreign key - which meter is being read)
- reading_date (date when reading was taken)
- current_reading (the new meter reading value)
- previous_reading (last reading value - auto-populated)
- consumption (calculated: current_reading - previous_reading)
- reading_type (Actual, Estimated, Customer-Submitted)
- reader_id (foreign key - which user/field officer took the reading)
- notes (optional notes about the reading)
- created_at (auto-generated timestamp)

RELATED DATA NEEDED:
- Meter table: meter_id, meter_number, meter_type, connection_id
- Service_Connection table: customer_id, utility_type_id, connection_number
- Customer table: first_name, last_name, customer_type
- Utility_Type table: utility_name, unit_of_measurement
- User table: user_id, full_name (for reader_id)

FORM REQUIREMENTS:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

MODAL TITLE: "Record Meter Reading"

FORM LAYOUT (Multi-step or Single Page):

SECTION 1: SELECT METER
Field: Meter Selection* (required)
- Type: Searchable dropdown/autocomplete
- Display format: "MTR-ELEC-2020-00001 - Nuwan Bandara (Electricity)"
- Format: meter_number - customer_name (utility_type)
- Filter options above dropdown:
  * All Utilities
  * Electricity only
  * Water only
  * Gas only
- Search by: meter number OR customer name
- Show meter status (only show "Active" meters)
- Validation: Required field

SECTION 2: METER INFORMATION (Auto-populated, read-only display)
Once a meter is selected, show:
- Customer Name: [auto-filled]
- Customer Type: [badge - Residential/Commercial/Industrial/Government]
- Utility Type: [icon + name - Electricity/Water/Gas]
- Connection Number: [auto-filled]
- Meter Number: [auto-filled]
- Meter Type: [Digital/Analog/Smart Meter/Industrial Meter]
- Unit of Measurement: [kWh/Cubic Meters]

Display this in a card/box with light background color for clarity.

SECTION 3: PREVIOUS READING (Auto-populated, read-only)
- Previous Reading Date: [auto-filled from last reading]
- Previous Reading Value: [auto-filled] [unit]
- Days Since Last Reading: [calculated - e.g., "32 days ago"]

If no previous reading exists:
- Show: "No previous reading found - This is the first reading for this meter"
- Previous Reading Value: 0.00
- Set initial_reading from Meter table as previous_reading

Display in a highlighted info box.

SECTION 4: NEW READING DETAILS (User Input Required)

Field 1: Reading Date*
- Type: Date picker
- Default value: Today's date
- Validation: 
  * Cannot be in the future
  * Cannot be before previous reading date
  * Required field
- Format: YYYY-MM-DD

Field 2: Current Reading*
- Type: Number input
- Placeholder: "Enter current meter reading"
- Min value: previous_reading value (cannot be less than last reading)
- Step: 0.01 (allows decimals)
- Unit display: Show unit next to input (e.g., "kWh" or "Cubic Meters")
- Validation:
  * Required field
  * Must be greater than previous reading
  * Must be a positive number
  * Show error if current < previous: "Current reading cannot be less than previous reading"
- Auto-focus this field when meter is selected

Field 3: Consumption (Auto-calculated, read-only)
- Formula: current_reading - previous_reading
- Display: Large, bold number with unit
- Update in real-time as user types current_reading
- Color:
  * Green if consumption is within normal range (define as 0-500 for electricity, 0-100 for water/gas)
  * Orange if high (500-1000 electricity, 100-200 water/gas)
  * Red if very high (>1000 electricity, >200 water/gas)
- Show calculation: "[current_reading] - [previous_reading] = [consumption]"

Field 4: Reading Type*
- Type: Radio buttons (horizontal layout with icons)
- Options:
  1. Actual (default, selected)
     - Icon: Check circle (green)
     - Description: "Physical reading taken from meter"
  2. Estimated
     - Icon: Trending up (orange)
     - Description: "Estimated based on average consumption"
  3. Customer-Submitted
     - Icon: User (blue)
     - Description: "Reading provided by customer"
- Default: "Actual"
- Validation: Required (but has default)

Field 5: Reader/Field Officer (Auto-filled, read-only)
- Value: Currently logged-in user's name
- Display: "Recorded by: [Full Name]"
- Hidden field: reader_id (user_id from logged-in user)

Field 6: Notes (Optional)
- Type: Textarea
- Rows: 4
- Max length: 500 characters
- Placeholder: "Add any notes or observations (e.g., meter condition, access issues, anomalies)"
- Character counter: "0 / 500 characters"
- Optional field

SECTION 5: VALIDATION WARNINGS (Show if applicable)

Show warning badges if:
1. High Consumption Warning:
   - If consumption > 2x average consumption for this meter
   - Message: "âš ï¸ Warning: This reading shows unusually high consumption. Please verify the reading."
   - Color: Orange background

2. Very High Consumption Alert:
   - If consumption > 3x average consumption
   - Message: "ğŸš¨ Alert: Extremely high consumption detected. Please double-check the meter and reading."
   - Color: Red background

3. Zero Consumption Warning:
   - If consumption = 0 and reading_type = "Actual"
   - Message: "âš ï¸ No consumption detected. Is the meter functioning correctly?"
   - Color: Orange background

4. Long Gap Warning:
   - If days since last reading > 60 days
   - Message: "âš ï¸ It has been [X] days since the last reading. Consumption may be higher than normal."
   - Color: Yellow background

SECTION 6: FORM ACTIONS (Bottom of modal)

Buttons (right-aligned):
1. Cancel Button
   - Text: "Cancel"
   - Style: Secondary (gray border, white background)
   - Action: Close modal without saving
   - Shortcut: ESC key

2. Save as Draft Button (Optional feature)
   - Text: "Save as Draft"
   - Style: Outline button
   - Action: Save but don't process (for later completion)
   - Show only if reading_type = "Estimated"

3. Submit Reading Button
   - Text: "Submit Reading"
   - Style: Primary (gradient blue background, white text)
   - Action: Validate and submit form
   - Disabled if:
     * Meter not selected
     * Current reading is empty
     * Current reading < previous reading
     * Reading date is invalid
   - Show loading spinner on submit
   - Shortcut: CTRL+Enter (or CMD+Enter on Mac)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

FORM VALIDATION RULES:

Client-side validation (before submit):
1. Meter must be selected
2. Reading date cannot be empty
3. Reading date cannot be in the future
4. Reading date must be >= previous reading date
5. Current reading cannot be empty
6. Current reading must be > previous reading
7. Current reading must be a valid number (decimal allowed)
8. Reading type must be selected
9. Notes must be <= 500 characters

Show validation errors:
- Red border on invalid input field
- Red error text below the field
- Error icon next to field
- Prevent form submission until all errors are fixed

Success flow (after submit):
1. Show loading spinner on submit button
2. Disable all form fields
3. Make API call: POST /api/meter-readings
4. On success:
   - Show success toast notification: "âœ“ Meter reading recorded successfully"
   - Close modal
   - Refresh meter readings table
   - If consumption is high, ask: "Would you like to generate a bill now?"
5. On error:
   - Show error toast notification: "âœ— Failed to record reading: [error message]"
   - Re-enable form fields
   - Keep modal open for correction

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CSS STYLING REQUIREMENTS:

Modal:
- Width: 700px
- Max-height: 90vh
- Overflow: auto (scrollable)
- Border-radius: 16px
- Box-shadow: 0 20px 60px rgba(0,0,0,0.3)
- Backdrop: rgba(0,0,0,0.5) with backdrop-filter: blur(4px)

Modal Header:
- Background: Linear gradient (blue to cyan)
- Color: White
- Padding: 24px
- Border-radius: 16px 16px 0 0
- Icon: Activity icon (lucide-react)

Form Sections:
- Each section in a card with padding: 20px
- Section titles: font-weight: 600, margin-bottom: 16px
- Spacing between sections: 24px

Input Fields:
- Height: 44px
- Border-radius: 8px
- Border: 1px solid #E5E7EB
- Padding: 12px
- Font-size: 14px
- Focus state: border-color: #3B82F6, box-shadow: 0 0 0 3px rgba(59,130,246,0.1)

Read-only Fields:
- Background: #F9FAFB
- Border: 1px solid #E5E7EB
- Cursor: not-allowed
- Color: #6B7280

Consumption Display:
- Font-size: 32px
- Font-weight: 700
- Text-align: center
- Padding: 20px
- Border-radius: 12px
- Background based on value (green/orange/red gradient)
- Color: White

Radio Buttons:
- Display as cards (150px width each)
- Border: 2px solid #E5E7EB
- Border-radius: 12px
- Padding: 16px
- Hover: border-color: #3B82F6
- Selected: border-color: #3B82F6, background: #EFF6FF
- Icon at top, label below, description in small text

Warning Badges:
- Border-radius: 8px
- Padding: 12px 16px
- Margin-bottom: 16px
- Icon on left
- Font-size: 14px
- Font-weight: 500

Buttons:
- Height: 44px
- Border-radius: 8px
- Padding: 0 24px
- Font-weight: 600
- Transition: all 0.2s ease
- Hover: transform: translateY(-2px), box-shadow increase

Submit Button:
- Background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%)
- Color: White
- Hover: darken gradient
- Disabled: opacity: 0.5, cursor: not-allowed

Responsive:
- Mobile (<640px): Modal width: 95%, stack radio buttons vertically

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SAMPLE MOCK DATA FOR TESTING:

Meters array (for dropdown):
```javascript
const mockMeters = [
  {
    meter_id: 1,
    meter_number: 'MTR-ELEC-2020-00001',
    meter_type: 'Digital',
    meter_status: 'Active',
    connection: {
      connection_id: 1,
      connection_number: 'ELEC-2020-001',
      customer: {
        customer_id: 1,
        first_name: 'Nuwan',
        last_name: 'Bandara',
        customer_type: 'Residential'
      },
      utility: {
        utility_type_id: 1,
        utility_name: 'Electricity',
        unit_of_measurement: 'kWh'
      }
    },
    last_reading: {
      reading_date: '2024-11-30',
      current_reading: 560.00,
      consumption: 134.25
    }
  },
  // ... more meters
];
```

Previous reading display:
- Previous Reading Date: "2024-11-30"
- Previous Reading Value: "560.00 kWh"
- Days Since Last Reading: "14 days ago"

Current user (logged-in):
```javascript
const currentUser = {
  user_id: 2,
  full_name: 'Priya Fernando',
  user_role: 'Field Officer'
};
```

Form submission data structure:
```javascript
const readingData = {
  meter_id: 1,
  reading_date: '2024-12-14',
  current_reading: 695.50,
  previous_reading: 560.00,
  consumption: 135.50,
  reading_type: 'Actual',
  reader_id: 2,
  notes: 'Normal reading, meter functioning properly'
};
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

COMPONENT FILES TO CREATE:

1. RecordReadingModal.jsx
   - Main modal component
   - Contains entire form
   - Handles form state and submission

2. RecordReadingModal.css
   - All styling for modal and form
   - Responsive styles
   - Animations

3. MeterSearchDropdown.jsx (reusable component)
   - Searchable dropdown for meter selection
   - Filters and search functionality

Optional helper components:
- ConsumptionDisplay.jsx (the large consumption number with color)
- WarningBadge.jsx (reusable warning badge component)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

IMPLEMENTATION NOTES:

1. Use React useState for form data:
```javascript
const [formData, setFormData] = useState({
  meter_id: null,
  reading_date: new Date().toISOString().split('T')[0],
  current_reading: '',
  previous_reading: 0,
  consumption: 0,
  reading_type: 'Actual',
  reader_id: currentUser.user_id,
  notes: ''
});
```

2. Auto-calculate consumption whenever current_reading changes:
```javascript
useEffect(() => {
  if (formData.current_reading && formData.previous_reading) {
    const consumption = formData.current_reading - formData.previous_reading;
    setFormData(prev => ({ ...prev, consumption }));
  }
}, [formData.current_reading]);
```

3. When meter is selected:
   - Fetch last reading from database (or use mock data)
   - Auto-populate previous_reading
   - Auto-populate meter information
   - Focus on current_reading input

4. Validation on submit:
   - Check all required fields
   - Validate current > previous
   - Validate date range
   - Show error toast if validation fails

5. API call on submit:
```javascript
const handleSubmit = async (e) => {
  e.preventDefault();
  
  try {
    setIsSubmitting(true);
    const response = await axios.post('/api/meter-readings', formData);
    
    toast.success('Meter reading recorded successfully');
    onClose(); // Close modal
    onSuccess(); // Refresh parent table
    
    // Optional: Ask to generate bill
    if (formData.consumption > threshold) {
      // Show confirmation dialog
    }
  } catch (error) {
    toast.error('Failed to record reading: ' + error.message);
  } finally {
    setIsSubmitting(false);
  }
};
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Please create this form with:
- Complete functionality
- Beautiful, modern CSS styling
- Proper validation
- Mock data for testing
- Error handling
- Success/error toast notifications
- Responsive design
- Smooth animations
- User-friendly UX

Make it production-ready and visually impressive!